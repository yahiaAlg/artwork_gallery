{% extends 'base.html' %}

{% load static %}
{% block title %}Checkout | Brush & Pixel{% endblock %}
{% block extra_css %}
    <link rel="stylesheet" href="{% static 'css/payement.css' %}" />
{% endblock %}

{% block content %}
    <!-- Page Header with Breadcrumbs -->
    <section class="page-header">
    <div class="container">
        <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="{% url 'index' %}">Home</a></li>
            <li class="breadcrumb-item"><a href="{% url 'gallery' %}">Gallery</a></li>
            <li class="breadcrumb-item active" aria-current="page">Checkout</li>
        </ol>
        </nav>
    </div>
    </section>

    <!-- Checkout Section -->
    <section class="py-5">
    <div class="container">
        <!-- Checkout Progress Steps -->
        <div class="checkout-steps">
        <div class="step completed">
            <div class="step-number">
            <i class="fas fa-check"></i>
            </div>
            <div class="step-title">Shopping Cart</div>
        </div>
        <div class="step active">
            <div class="step-number">2</div>
            <div class="step-title">Payment</div>
        </div>
        <div class="step">
            <div class="step-number">3</div>
            <div class="step-title">Review</div>
        </div>
        <div class="step">
            <div class="step-number">4</div>
            <div class="step-title">Confirmation</div>
        </div>
        </div>

        <div class="row">
        <!-- Checkout Form -->
        <div class="col-lg-8 mb-4 mb-lg-0">
            <!-- Billing Address -->
            <div class="checkout-card">
            <h3>Billing Information</h3>
            <form id="billing-form">
                <div class="row">
                <div class="col-md-6 mb-3">
                    <label for="firstName" class="form-label">First Name</label>
                    <input
                    type="text"
                    class="form-control"
                    id="firstName"
                    required
                    />
                </div>
                <div class="col-md-6 mb-3">
                    <label for="lastName" class="form-label">Last Name</label>
                    <input
                    type="text"
                    class="form-control"
                    id="lastName"
                    required
                    />
                </div>
                </div>

                <div class="mb-3">
                <label for="email" class="form-label">Email Address</label>
                <input
                    type="email"
                    class="form-control"
                    id="email"
                    required
                />
                </div>

                <div class="mb-3">
                <label for="phone" class="form-label">Phone Number</label>
                <input type="tel" class="form-control" id="phone" required />
                </div>

                <div class="mb-3">
                <label for="address" class="form-label">Address</label>
                <input
                    type="text"
                    class="form-control"
                    id="address"
                    required
                />
                </div>

                <div class="row">
                <div class="col-md-6 mb-3">
                    <label for="city" class="form-label">City</label>
                    <input
                    type="text"
                    class="form-control"
                    id="city"
                    required
                    />
                </div>
                <div class="col-md-6 mb-3">
                    <label for="postcode" class="form-label">Postal Code</label>
                    <input
                    type="text"
                    class="form-control"
                    id="postcode"
                    required
                    />
                </div>
                </div>

                <div class="row">
                <div class="col-md-6 mb-3">
                    <label for="state" class="form-label">State/Province</label>
                    <input
                    type="text"
                    class="form-control"
                    id="state"
                    required
                    />
                </div>
                <div class="col-md-6 mb-3">
                    <label for="country" class="form-label">Country</label>
                    <select class="form-select" id="country" required>
                    <option value="">Select country</option>
                    <option value="US">United States</option>
                    <option value="CA">Canada</option>
                    <option value="UK">United Kingdom</option>
                    <option value="AU">Australia</option>
                    <option value="FR">France</option>
                    <option value="DE">Germany</option>
                    <option value="IT">Italy</option>
                    <option value="JP">Japan</option>
                    </select>
                </div>
                </div>

                <div class="form-check mb-3">
                <input
                    class="form-check-input"
                    type="checkbox"
                    id="sameShipping"
                    checked
                />
                <label class="form-check-label" for="sameShipping">
                    Shipping address is the same as billing
                </label>
                </div>
            </form>
            </div>

            <!-- Payment Method Selection -->
            <div class="checkout-card">
            <h3>Payment Method</h3>
            <div class="payment-methods">
                <div class="form-check active">
                <input
                    class="form-check-input"
                    type="radio"
                    name="paymentMethod"
                    id="creditCard"
                    checked
                />
                <label class="form-check-label" for="creditCard">
                    <i class="fab fa-cc-visa payment-icon"></i>
                    <i class="fab fa-cc-mastercard payment-icon"></i>
                    <i class="fab fa-cc-amex payment-icon"></i>
                    Credit or Debit Card
                </label>
                </div>
                <div id="creditCardForm">
                <div class="mb-3">
                    <label for="cardName" class="form-label"
                    >Name on Card</label
                    >
                    <input
                    type="text"
                    class="form-control"
                    id="cardName"
                    required
                    />
                </div>
                <div class="mb-3">
                    <label for="cardNumber" class="form-label"
                    >Card Number</label
                    >
                    <input
                    type="text"
                    class="form-control card-number-input"
                    id="cardNumber"
                    placeholder="XXXX XXXX XXXX XXXX"
                    required
                    />
                </div>
                <div class="expiry-cvv-group">
                    <div class="form-group">
                    <label for="expiryDate" class="form-label"
                        >Expiration Date</label
                    >
                    <input
                        type="text"
                        class="form-control"
                        id="expiryDate"
                        placeholder="MM/YY"
                        required
                    />
                    </div>
                    <div class="form-group">
                    <label for="cvv" class="form-label">CVV</label>
                    <input
                        type="text"
                        class="form-control"
                        id="cvv"
                        placeholder="XXX"
                        required
                    />
                    </div>
                </div>
                </div>

                <div class="form-check mt-4">
                <input
                    class="form-check-input"
                    type="radio"
                    name="paymentMethod"
                    id="paypal"
                />
                <label class="form-check-label" for="paypal">
                    <i class="fab fa-paypal payment-icon"></i>
                    PayPal
                </label>
                </div>

                <div class="form-check mt-3">
                <input
                    class="form-check-input"
                    type="radio"
                    name="paymentMethod"
                    id="applePay"
                />
                <label class="form-check-label" for="applePay">
                    <i class="fab fa-apple-pay payment-icon"></i>
                    Apple Pay
                </label>
                </div>
            </div>

            <div class="secure-badge">
                <i class="fas fa-lock"></i>
                Your payment information is secure. We use industry-standard
                encryption to protect your data.
            </div>
            </div>

            <!-- Navigation Buttons -->
            <div class="d-flex justify-content-between mt-4">
            <a href="{% url 'gallery' %}" class="btn btn-outline-primary">
                <i class="fas fa-arrow-left me-2"></i> Back to Gallery
            </a>
            <a href="#" class="btn btn-primary btn-lg">
                Review Order <i class="fas fa-arrow-right ms-2"></i>
            </a>
            </div>
        </div>

        <!-- Order Summary -->
        <div class="col-lg-4">
            <div class="checkout-card">
            <h3>Order Summary</h3>
            <div class="order-items">
                <!-- Item 1 -->
                <div class="order-item">
                <div class="order-item-image">
                    <img
                    src="https://images.unsplash.com/photo-1549490349-8643362247b5?ixlib=rb-1.2.1&auto=format&fit=crop&w=634&q=80"
                    alt="Artwork"
                    />
                </div>
                <div class="order-item-details">
                    <h4 class="order-item-title">Seaside Dreams</h4>
                    <p class="order-item-artist">Emma Parker</p>
                </div>
                <div class="order-item-price">$450</div>
                </div>

                <!-- Item 2 -->
                <div class="order-item">
                <div class="order-item-image">
                    <img
                    src="https://images.unsplash.com/photo-1578301978693-85fa9c0320b9?ixlib=rb-1.2.1&auto=format&fit=crop&w=634&q=80"
                    alt="Artwork"
                    />
                </div>
                <div class="order-item-details">
                    <h4 class="order-item-title">Golden Horizon</h4>
                    <p class="order-item-artist">Marcus Rivera</p>
                </div>
                <div class="order-item-price">$750</div>
                </div>

                <!-- Item 3 -->
                <div class="order-item">
                <div class="order-item-image">
                    <img
                    src="https://images.unsplash.com/photo-1571115764595-644a1f56a55c?ixlib=rb-1.2.1&auto=format&fit=crop&w=634&q=80"
                    alt="Artwork"
                    />
                </div>
                <div class="order-item-details">
                    <h4 class="order-item-title">Silent Echo</h4>
                    <p class="order-item-artist">James Wilson</p>
                </div>
                <div class="order-item-price">$840</div>
                </div>
            </div>

            <!-- Order Totals -->
            <div class="order-summary-totals">
                <div class="order-row">
                <span>Subtotal:</span>
                <span>$2,040.00</span>
                </div>
                <div class="order-row">
                <span>Shipping:</span>
                <span>Free</span>
                </div>
                <div class="order-row">
                <span>Sales Tax (8%):</span>
                <span>$163.20</span>
                </div>
                <div class="order-row total">
                <span>Total:</span>
                <span>$2,203.20</span>
                </div>
            </div>

            <!-- Promo Code -->
            <div class="mt-4">
                <div class="input-group">
                <input
                    type="text"
                    class="form-control"
                    placeholder="Promo code"
                />
                <button class="btn btn-outline-primary" type="button">
                    Apply
                </button>
                </div>
            </div>

            <!-- Order Policies -->
            <div class="mt-4">
                <p class="mb-2">
                <i class="fas fa-truck me-2"></i> Free shipping on all orders
                </p>
                <p class="mb-2">
                <i class="fas fa-shield-alt me-2"></i> 30-day return policy
                </p>
                <p class="mb-0">
                <i class="fas fa-certificate me-2"></i> Certificate of
                authenticity included
                </p>
            </div>
            </div>

            <!-- Need Help Box -->
            <div class="checkout-card mt-4">
            <h3>Need Help?</h3>
            <p>
                Our customer service team is here to assist you with your
                purchase.
            </p>
            <p class="mb-2">
                <i class="fas fa-phone me-2"></i> (212) 555-7890
            </p>
            <p class="mb-2">
                <i class="fas fa-envelope me-2"></i> support@brushandpixel.com
            </p>
            <p class="mb-0">
                <i class="fas fa-clock me-2"></i> Mon-Fri: 9am-6pm EST
            </p>
            </div>
        </div>
        </div>
    </div>
    </section>
{% endblock %}

{% block extra_js %}
    <script>
    // Handle payment method selection
    document
        .querySelectorAll('input[name="paymentMethod"]')
        .forEach(function (radio) {
        radio.addEventListener("change", function () {
            // Reset all payment methods
            document
            .querySelectorAll(".payment-methods .form-check")
            .forEach(function (check) {
                check.classList.remove("active");
            });

            // Add active class to selected payment method
            this.closest(".form-check").classList.add("active");

            // Show/hide credit card form
            const creditCardForm = document.getElementById("creditCardForm");
            creditCardForm.style.display =
            this.id === "creditCard" ? "block" : "none";
        });
        });

    // Format credit card number with spaces
    document
        .getElementById("cardNumber")
        .addEventListener("input", function (e) {
        let value = e.target.value
            .replace(/\s+/g, "")
            .replace(/[^0-9]/gi, "");
        let formattedValue = "";

        for (let i = 0; i < value.length; i++) {
            if (i > 0 && i % 4 === 0) {
            formattedValue += " ";
            }
            formattedValue += value[i];
        }

        e.target.value = formattedValue;
        });

    // Format expiry date (MM/YY)
    document
        .getElementById("expiryDate")
        .addEventListener("input", function (e) {
        let value = e.target.value.replace(/\D/g, "");

        if (value.length > 2) {
            value = value.substring(0, 2) + "/" + value.substring(2, 4);
        }

        e.target.value = value;
        });

    // Limit CVV to 3-4 digits
    document.getElementById("cvv").addEventListener("input", function (e) {
        e.target.value = e.target.value.replace(/\D/g, "").substring(0, 4);
    });
    </script>
{% endblock %}